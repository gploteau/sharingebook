[{"C:\\Dev\\sharingebook\\src\\app\\components\\player.js":"1","C:\\Dev\\sharingebook\\src\\app\\components\\tracksList.js":"2","C:\\Dev\\sharingebook\\src\\app\\layout.js":"3","C:\\Dev\\sharingebook\\src\\app\\page.js":"4","C:\\Dev\\sharingebook\\src\\pages\\api\\files.js":"5","C:\\Dev\\sharingebook\\src\\utils\\cookies.js":"6","C:\\Dev\\sharingebook\\src\\pages\\_app.js":"7"},{"size":19499,"mtime":1688509102484,"results":"8","hashOfConfig":"9"},{"size":1816,"mtime":1688500810144,"results":"10","hashOfConfig":"9"},{"size":480,"mtime":1688498172924,"results":"11","hashOfConfig":"9"},{"size":151,"mtime":1688497927229,"results":"12","hashOfConfig":"9"},{"size":1794,"mtime":1688500762714,"results":"13","hashOfConfig":"9"},{"size":470,"mtime":1688328199959,"results":"14","hashOfConfig":"9"},{"size":748,"mtime":1688508152765,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19"},"1wrk6gz",{"filePath":"20","messages":"21","suppressedMessages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","suppressedMessages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32"},{"filePath":"33","messages":"34","suppressedMessages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","suppressedMessages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Dev\\sharingebook\\src\\app\\components\\player.js",["39","40"],[],"import React, {useEffect, useLayoutEffect, useRef, useState} from 'react';\r\nimport { useCookies } from 'react-cookie';\r\nimport { usePathname, useSearchParams, useRouter } from 'next/navigation'\r\nimport Image from 'next/image';\r\n\r\nimport TracksList from \"@/app/components/tracksList\";\r\nimport './player.scss'\r\n\r\nimport ShareIcon from 'public/assets/icons/share.svg';\r\n\r\nimport HeartIcon from 'public/assets/icons/heart-icon.svg';\r\nimport FullHeartIcon from 'public/assets/icons/heart-icon-filled-04.svg';\r\n\r\nimport HandleIcon from 'public/assets/icons/handle-13.svg';\r\nimport HandleDownIcon from 'public/assets/icons/handle-14.svg';\r\n\r\nimport NextTrackIcon from 'public/assets/icons/control-icon-12.svg';\r\nimport PrevTrackIcon from 'public/assets/icons/control-icon-11.svg';\r\nimport PlayTrackIcon from 'public/assets/icons/control-icon-10.svg';\r\nimport PauseTrackIcon from 'public/assets/icons/control-icon-09.svg';\r\n\r\nimport SpeakerIcon from 'public/assets/icons/volume-icon-15.svg';\r\nimport SpeakerMuteIcon from 'public/assets/icons/volume-icon-muted-15.svg';\r\n\r\nimport TrackListIcon from 'public/assets/icons/bottom-icons-20.svg';\r\nimport LoopIcon from 'public/assets/icons/bottom-icons-21.svg';\r\nimport ShuffleIcon from 'public/assets/icons/bottom-icons-22.svg';\r\n\r\n// eslint-disable-next-line\r\nNumber.prototype.toHHMMSS = function () {\r\n    // snippet taken from stackoverflow\r\n    let sec_num = parseInt(this, 10); // don't forget the second param\r\n    let hours   = Math.floor(sec_num / 3600);\r\n    let minutes = Math.floor((sec_num - (hours * 3600)) / 60);\r\n    let seconds = sec_num - (hours * 3600) - (minutes * 60);\r\n\r\n    if (hours   < 10) {hours   = \"0\"+hours;}\r\n    if (minutes < 10) {minutes = \"0\"+minutes;}\r\n    if (seconds < 10) {seconds = \"0\"+seconds;}\r\n    return (hours>0?hours+':':\"\")+minutes+':'+seconds;\r\n}\r\n\r\nexport default function Player() {\r\n    const router = useRouter()\r\n    const pathname = usePathname()\r\n    const searchParams = useSearchParams()\r\n\r\n    const [cookies, setCookie, removeCookie] = useCookies(['favorites', 'currentSong', 'currentTime']);\r\n\r\n    const [isLoading, setLoading] = useState(true)\r\n    const [audio, setAudio] = useState(null)\r\n    const [volume, setVolume] = useState(0.5)\r\n    const [progress, setProgress] = useState(0)\r\n    const [newProgress, setNewProgress] = useState(0)\r\n    const [trackListOpened, setTrackListOpened] = useState(false)\r\n    const [index, setIndex] = useState(0);\r\n    const [pause, setPause] = useState(true);\r\n    const [currentTime, setCurrentTime] = useState('00:00');\r\n    const [duration, setDuration] = useState('00:00');\r\n    const [currentSong, setCurrentSong] = useState({name:'', author: '', cover: '', file:'', duration: ''})\r\n    const [musicList, setMusicList] = useState([]);\r\n\r\n    const refHandleVolume = useRef(null);\r\n    const refVolumeBarCtrl = useRef(null);\r\n    const [volumeHandleLeft, setVolumeHandleLeft] = useState(0);\r\n    const [volumeBarSize, setVolumeBarSize] = useState(0);\r\n    const [handleVolumeDown, setHandleVolumeDown] = useState(false);\r\n\r\n    const refProgressBar = useRef(null);\r\n    const [progressHandleLeft, setProgressHandleLeft] = useState(0);\r\n    const [progressBarSize, setProgressBarSize] = useState(0);\r\n    const [handleProgressDown, setHandleProgressDown] = useState(false);\r\n    const [spannedTime, setSpannedTime] = useState('');\r\n\r\n    const [audioLoop, setAudioLoop] = useState(false);\r\n    const [audioShuffle, setAudioShuffle] = useState(false);\r\n\r\n    const [favoriteList, setFavoriteList] = useState([]);\r\n\r\n    const resizeComponents = () => {\r\n        const { width:volumeBarWidth } = refVolumeBarCtrl.current.getBoundingClientRect();\r\n        setVolumeHandleLeft(volumeBarWidth * volume);\r\n        setVolumeBarSize(volumeBarWidth - volumeBarWidth * volume)\r\n\r\n        const { width:progressBarWidth } = refProgressBar.current.getBoundingClientRect();\r\n        if(!handleProgressDown) {\r\n            setProgressHandleLeft(progressBarWidth * progress / 100);\r\n            setProgressBarSize(progressBarWidth - progressBarWidth * progress / 100)\r\n        }\r\n\r\n    }\r\n\r\n    useLayoutEffect(() => {\r\n        resizeComponents();\r\n    }, []);\r\n\r\n    const getTracks = async () => {\r\n        const res = await fetch('/api/files')\r\n        return res.json()\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        if(musicList.length === 0) {\r\n            getTracks()\r\n                .then((data) => {\r\n                    setMusicList(data)\r\n                    if(typeof cookies['favorites'] !== 'undefined' && cookies['favorites'].length) {\r\n                        setFavoriteList(cookies['favorites'])\r\n                    }\r\n                    let id = pathname.match(/\\/([a-z0-9]+)/gi );\r\n                    if(id !== null && id.length > 0) {\r\n                        id = id[0].replace('/', '');\r\n                        let index = data.findIndex((item) => item.id === id);\r\n                        setCurrentSong(data[index]);\r\n                        setIndex(index);\r\n                    } else if(typeof cookies['currentSong'] !== 'undefined' && cookies['currentSong']) {\r\n                        let index = data.findIndex((item) => item.id === cookies['currentSong']);\r\n                        setCurrentSong(data[index]);\r\n                        setIndex(index);\r\n\r\n                    } else {\r\n                        setCurrentSong(data[0]);\r\n                    }\r\n                })\r\n        }\r\n\r\n        if(audio !== null)\r\n        {\r\n            audio.volume = volume;\r\n\r\n            if(newProgress !== 0 && !handleProgressDown) {\r\n                audio.currentTime = audio.duration * newProgress / 100;\r\n                setNewProgress(0);\r\n                setProgress(newProgress);\r\n            }\r\n        }\r\n\r\n\r\n        if (pause && !isLoading && audio !== null) {\r\n            audio.pause();\r\n        } else {\r\n\r\n            if(audio === null && musicList.length > 0) {\r\n                let newAudio = new Audio(musicList[index].file)\r\n\r\n                if(typeof cookies['currentSong'] !== 'undefined' && cookies['currentSong'] === musicList[index].id &&\r\n                    typeof cookies['currentTime'] !== 'undefined' && cookies['currentTime']) {\r\n                    newAudio.currentTime = cookies['currentTime'];\r\n                } else {\r\n                    newAudio.currentTime = 0;\r\n                }\r\n\r\n                newAudio.volume = volume;\r\n                newAudio.preload = 'metadata';\r\n                newAudio.autoplay = false;\r\n                newAudio.loop = audioLoop;\r\n\r\n                if(!isLoading) newAudio.play();\r\n\r\n                setLoading(false);\r\n\r\n                setCookie('currentSong', musicList[index].id, {\r\n                    path: '/',\r\n                });\r\n\r\n                router.push('/' + musicList[index].id);\r\n\r\n                newAudio.addEventListener('loadedmetadata', (e) => {\r\n                    setProgress(e.target.currentTime / e.target.duration * 100);\r\n                    setDuration(e.target.duration.toHHMMSS());\r\n                    setCurrentTime(e.target.currentTime.toHHMMSS());\r\n                });\r\n\r\n                newAudio.addEventListener('ended', () => {\r\n                    if(!audioLoop) {\r\n                        if(audioShuffle) {\r\n                            clickAudio(Math.floor(Math.random() * musicList.length));\r\n                        } else {\r\n                            nextSong();\r\n                        }\r\n                    }\r\n                });\r\n\r\n                newAudio.addEventListener('timeupdate', () => {\r\n                    if(!newProgress && !handleProgressDown) setProgress(newAudio.currentTime / newAudio.duration * 100);\r\n                    setCurrentTime(newAudio.currentTime.toHHMMSS());\r\n                    setDuration(newAudio.duration.toHHMMSS());\r\n\r\n                    setCookie('currentTime', newAudio.currentTime, {\r\n                        path: '/',\r\n                    });\r\n                });\r\n\r\n                setAudio(newAudio);\r\n                setCurrentSong(musicList[index]);\r\n\r\n            } else if(audio !== null) {\r\n                audio.loop = audioLoop;\r\n                audio.play();\r\n            }\r\n        }\r\n\r\n        function updateSize() {\r\n            resizeComponents();\r\n        }\r\n\r\n        resizeComponents();\r\n\r\n        window.addEventListener('resize', updateSize);\r\n\r\n        setCookie('favorites', favoriteList, {\r\n            path: '/',\r\n        });\r\n\r\n    }, [index, pause, volume, progress, audioLoop, favoriteList, currentSong, handleProgressDown]);\r\n\r\n    const playOrPause = () => {\r\n        setPause(!pause);\r\n    }\r\n\r\n    const prevSong = () => {\r\n        if (index === 0) {\r\n            clickAudio(musicList.length - 1);\r\n        } else {\r\n            clickAudio(index - 1);\r\n        }\r\n    }\r\n\r\n    const nextSong = () => {\r\n        if (index === musicList.length - 1) {\r\n            clickAudio(0);\r\n        } else {\r\n            clickAudio(index + 1);\r\n        }\r\n    }\r\n\r\n    function clickAudio(key) {\r\n        if(key === index){\r\n            playOrPause();\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        if(audio !== null) audio.pause();\r\n        setAudio(null);\r\n        setIndex(key);\r\n        setPause(false);\r\n        setTimeout(() => {\r\n            setTrackListOpened(false)\r\n        }, 500);\r\n    }\r\n\r\n    const calculateProgress = (touchPosition) => {\r\n        const { width } = refProgressBar.current.getBoundingClientRect();\r\n        const newPosition = touchPosition - ((window.innerWidth - width) / 2)\r\n\r\n        if(newPosition < 0) return;\r\n        if(newPosition > width) return;\r\n\r\n        const { width:progressBarWidth } = refProgressBar.current.getBoundingClientRect();\r\n\r\n        if(audio !== null){\r\n            setSpannedTime(( audio.duration / progressBarWidth * newPosition).toHHMMSS());\r\n        }\r\n\r\n        let newProgress = parseFloat(1.0 / width) * parseFloat(newPosition);\r\n        setProgress(newProgress * 100);\r\n        setNewProgress(newProgress * 100);\r\n        setProgressHandleLeft(width * newProgress);\r\n    }\r\n\r\n    const progressBarPickHandler = (e) => {\r\n        let touchPosition = 0;\r\n        if (e.type === 'mousedown') {\r\n            touchPosition = e.pageX;\r\n            document.addEventListener('mousemove', progressBarMoveHandler);\r\n            document.addEventListener('mouseup', progressBarDropHandler);\r\n            setHandleProgressDown(true);\r\n        } else if (e.type === 'touchstart') {\r\n            touchPosition = e.touches[0].pageX;\r\n            e.target.addEventListener('touchmove', progressBarMoveHandler);\r\n            e.target.addEventListener('touchend', progressBarDropHandler);\r\n            setHandleProgressDown(true);\r\n        }\r\n\r\n        calculateProgress(touchPosition);\r\n    }\r\n\r\n\r\n    const progressBarMoveHandler = (e) => {\r\n        let touchPosition = 0;\r\n        if (e.type === 'mousemove') {\r\n            touchPosition = e.pageX;\r\n            document.addEventListener('mouseup', progressBarDropHandler);\r\n        } else if (e.type === 'touchmove') {\r\n            touchPosition = e.touches[0].pageX;\r\n            e.target.addEventListener('touchend', progressBarDropHandler);\r\n        }\r\n\r\n        calculateProgress(touchPosition);\r\n    }\r\n\r\n    const progressBarDropHandler = (e) => {\r\n        setHandleProgressDown(false);\r\n        setSpannedTime('')\r\n        e.target.removeEventListener('touchmove', progressBarMoveHandler);\r\n        e.target.removeEventListener('touchend', progressBarDropHandler);\r\n        document.removeEventListener('mousemove', progressBarMoveHandler);\r\n        document.removeEventListener('mouseup', progressBarDropHandler);\r\n    }\r\n\r\n    const calculateVolume = (touchPosition) => {\r\n        const { width } = refVolumeBarCtrl.current.getBoundingClientRect();\r\n        const newPosition = touchPosition - ((window.innerWidth - width) / 2)\r\n        if(newPosition < 0) return;\r\n        if(newPosition > width) return;\r\n\r\n        setVolumeHandleLeft(newPosition)\r\n        setVolumeBarSize(width - newPosition)\r\n        let newVolume = (parseFloat(1.0 / width) * parseFloat(newPosition)).toFixed(2)\r\n        setVolume(newVolume);\r\n    }\r\n\r\n    const volumeBarPickHandler = (e) => {\r\n        let touchPosition = 0;\r\n        if (e.type === 'mousedown') {\r\n            touchPosition = e.pageX;\r\n            document.addEventListener('mousemove', volumeBarMoveHandler);\r\n            document.addEventListener('mouseup', volumeBarDropHandler);\r\n            setHandleVolumeDown(true);\r\n        } else if (e.type === 'touchstart') {\r\n            touchPosition = e.touches[0].pageX;\r\n            e.target.addEventListener('touchmove', volumeBarMoveHandler);\r\n            e.target.addEventListener('touchend', volumeBarDropHandler);\r\n            setHandleVolumeDown(true);\r\n        }\r\n\r\n        calculateVolume(touchPosition);\r\n    }\r\n\r\n    const volumeBarMoveHandler = (e) => {\r\n        let touchPosition = 0;\r\n        if (e.type === 'mousemove') {\r\n            touchPosition = e.pageX;\r\n            document.addEventListener('mouseup', volumeBarDropHandler);\r\n        } else if (e.type === 'touchmove') {\r\n            touchPosition = e.touches[0].pageX;\r\n            e.target.addEventListener('touchend', volumeBarDropHandler);\r\n        }\r\n\r\n        calculateVolume(touchPosition);\r\n    }\r\n\r\n    const volumeBarDropHandler = (e) => {\r\n        setHandleVolumeDown(false);\r\n        e.target.removeEventListener('touchmove', volumeBarMoveHandler);\r\n        e.target.removeEventListener('touchend', volumeBarDropHandler);\r\n        document.removeEventListener('mousemove', volumeBarMoveHandler);\r\n        document.removeEventListener('mouseup', volumeBarDropHandler);\r\n    }\r\n\r\n    const mutePlayer = () => {\r\n        setVolume(0);\r\n    }\r\n\r\n    const addToFavorite = () => {\r\n        if (favoriteList.includes(currentSong.id)) {\r\n            setFavoriteList(favoriteList.filter(item => item !== currentSong.id));\r\n        } else {\r\n            setFavoriteList([...favoriteList, currentSong.id]);\r\n        }\r\n    }\r\n\r\n    const shareTrack = () => {\r\n        console.log(window.location.origin + pathname);\r\n        navigator.share({\r\n            title: currentSong.title,\r\n            text: currentSong.title,\r\n            url: window.location.origin + pathname,\r\n        })\r\n            .then(() => console.log('Successful share'))\r\n            .catch((error) => console.log('Error sharing', error));\r\n    }\r\n\r\n    return (\r\n        <div className=\"player\">\r\n            <TracksList opened={trackListOpened}\r\n                        close={() => setTrackListOpened(!trackListOpened)}\r\n                        tracks={musicList}\r\n                        favs={favoriteList}\r\n                        current={index}\r\n                        setCurrent={clickAudio}\r\n            />\r\n            <div className=\"ctr-1\"><p className=\"play-pause-text\"><strong>{pause ? 'PAUSED' : 'PLAYING'}</strong><span>{currentTime} / {duration}</span></p>\r\n                <div className=\"top-icons\">\r\n                    <button className=\"heart-icon\" onClick={addToFavorite}>\r\n                        {favoriteList.includes(currentSong.id) ? <FullHeartIcon /> : <HeartIcon />}\r\n                    </button>\r\n                    <button className=\"share-icon\" onClick={shareTrack}>\r\n                        <ShareIcon />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <p className=\"track-title\" title={currentSong.title || 'No title'}>{isLoading ? 'Loading...' : currentSong.title || 'No title'}</p>\r\n            {currentSong.author ? <p className=\"track-author\" title={currentSong.author}>{currentSong.author}</p> : null}\r\n            <div className=\"cover-container\">\r\n                {isLoading ? <div style={{height: 213}}/> : <Image src={currentSong.cover} height={200} width={200} alt={\"\"}/>}\r\n            </div>\r\n            <div className=\"bottom-ctr\">\r\n                <div className=\"progress-container\"\r\n                     onTouchStart={progressBarPickHandler}\r\n                     onMouseDown={progressBarPickHandler}\r\n                >\r\n                    <div className=\"progress-bar\" ref={refProgressBar}>\r\n                        <div className=\"done\" id=\"doneProgressBar\" style={{right: progressBarSize}}></div>\r\n                        <div className=\"remaining\"></div>\r\n                    </div>\r\n                    <div className=\"handle-ctr\" style={{left: progressHandleLeft}}>\r\n                        <p className=\"time-span\">\r\n                            {spannedTime ? spannedTime : currentTime}\r\n                            <span></span>\r\n                        </p>\r\n                        <button className=\"handle\">\r\n                            {handleProgressDown ? <HandleDownIcon /> : <HandleIcon />}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"control-icons-container\">\r\n                    <button className=\"play-control prev-track-btn-ctr\" onClick={prevSong}>\r\n                        <PrevTrackIcon />\r\n                    </button>\r\n                    <button className=\"play-control play-pause-container\" onClick={playOrPause}>\r\n                        {pause ? <PlayTrackIcon /> : <PauseTrackIcon />}\r\n                    </button>\r\n                    <button className=\"play-control next-track-btn-ctr\" onClick={nextSong}>\r\n                        <NextTrackIcon />\r\n                    </button>\r\n                </div>\r\n                <div className=\"volume-container\"\r\n                     onTouchStart={volumeBarPickHandler}\r\n                     onMouseDown={volumeBarPickHandler}\r\n                >\r\n                    <div className=\"volume-icon-ctr\">\r\n                        <button className=\"speaker-icon\" onClick={mutePlayer}>\r\n                            {volume < 0.01 ? <SpeakerMuteIcon/> : <SpeakerIcon />}\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"volume-bar-ctr\" ref={refVolumeBarCtrl}>\r\n                        <div className=\"volume-bar\">\r\n                            <div className=\"done\" style={{right: volumeBarSize}}></div>\r\n                            <div className=\"remaining\"></div>\r\n                        </div>\r\n                        <div className=\"handle-ctr\" ref={refHandleVolume} style={{left: volumeHandleLeft}}>\r\n                            <button className=\"handle\" style={{backgroundColor: handleVolumeDown ? '#333' : '#f0f8ff'}}></button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"volume-pctg-ctr\">\r\n                        <span>{parseInt(volume * 100, 10)}</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bottom-icons-ctr\">\r\n                    <button className=\"tracks-list-btn\" onClick={() => setTrackListOpened(!trackListOpened)}>\r\n                        <TrackListIcon />\r\n                    </button>\r\n                    <button className=\"loop-btn\" onClick={() => setAudioLoop(!audioLoop)}>\r\n                        <LoopIcon style={{opacity: audioLoop ? 1 : 0.6}} />\r\n                    </button>\r\n                    <button className=\"shuffle-btn\" onClick={() => setAudioShuffle(!audioShuffle)}>\r\n                        <ShuffleIcon style={{opacity: audioShuffle ? 1 : 0.6}} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}\r\n","C:\\Dev\\sharingebook\\src\\app\\components\\tracksList.js",[],[],"C:\\Dev\\sharingebook\\src\\app\\layout.js",[],[],"C:\\Dev\\sharingebook\\src\\app\\page.js",[],[],"C:\\Dev\\sharingebook\\src\\pages\\api\\files.js",["41"],[],"import fs from 'fs'\r\nimport path from 'path'\r\nimport * as mm from 'music-metadata';\r\nconst { getAudioDurationInSeconds } = require('get-audio-duration')\r\nconst md5 = require('md5');\r\n\r\nconst getTracks = async () => {\r\n\r\n    const dirRelativeToPublicFolder = 'sound';\r\n\r\n    const db_file = path.resolve('./public', 'db.json');\r\n\r\n    let db = [];\r\n\r\n    if(fs.existsSync(db_file)) {\r\n        db = JSON.parse(fs.readFileSync(db_file));\r\n    }\r\n\r\n    const dir = path.resolve('./public', dirRelativeToPublicFolder);\r\n\r\n    const filenames = fs.readdirSync(dir);\r\n\r\n    if(filenames.length === db.length) {\r\n        return db;\r\n    }\r\n\r\n    const tracks = await Promise.all(filenames.map(name => {\r\n        path.join('/', dirRelativeToPublicFolder, name)\r\n        const metaData = mm.parseFile(path.join(dir, name));\r\n        const duration = getAudioDurationInSeconds(path.join(dir, name));\r\n\r\n        return duration.then((duration) => {\r\n            return metaData.then((metadata) => {\r\n\r\n                let cover = metadata.common.picture ?\r\n                    'data:' + metadata.common.picture[0].format + ';base64,' + Buffer.from(metadata.common.picture[0].data).toString('base64') : ''\r\n\r\n                return {\r\n                    id: md5(name),\r\n                    duration: duration,\r\n                    file: path.join('/', dirRelativeToPublicFolder, name),\r\n                    title: metadata.common.title || name,\r\n                    author: metadata.common.artist,\r\n                    cover : cover\r\n                };\r\n            });\r\n        })\r\n    }));\r\n\r\n    fs.writeFileSync(db_file, JSON.stringify(tracks));\r\n\r\n    return tracks;\r\n}\r\n\r\nexport default async (req, res) => {\r\n\r\n    const images = await getTracks();\r\n\r\n    return res.status(200).json(images);\r\n\r\n}\r\n","C:\\Dev\\sharingebook\\src\\utils\\cookies.js",[],[],"C:\\Dev\\sharingebook\\src\\pages\\_app.js",[],[],{"ruleId":"42","severity":1,"message":"43","line":95,"column":8,"nodeType":"44","endLine":95,"endColumn":10,"suggestions":"45"},{"ruleId":"42","severity":1,"message":"46","line":216,"column":8,"nodeType":"44","endLine":216,"endColumn":98,"suggestions":"47"},{"ruleId":"48","severity":1,"message":"49","line":55,"column":1,"nodeType":"50","endLine":61,"endColumn":2},"react-hooks/exhaustive-deps","React Hook useLayoutEffect has a missing dependency: 'resizeComponents'. Either include it or remove the dependency array.","ArrayExpression",["51"],"React Hook useEffect has missing dependencies: 'audio', 'audioShuffle', 'clickAudio', 'cookies', 'isLoading', 'musicList', 'newProgress', 'nextSong', 'pathname', 'resizeComponents', 'router', and 'setCookie'. Either include them or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setCurrentSong' needs the current value of 'musicList'.",["52"],"import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration",{"desc":"53","fix":"54"},{"desc":"55","fix":"56"},"Update the dependencies array to be: [resizeComponents]",{"range":"57","text":"58"},"Update the dependencies array to be: [index, pause, volume, progress, audioLoop, favoriteList, currentSong, handleProgressDown, musicList, audio, isLoading, resizeComponents, setCookie, cookies, pathname, newProgress, router, audioShuffle, clickAudio, nextSong]",{"range":"59","text":"60"},[4179,4181],"[resizeComponents]",[8476,8566],"[index, pause, volume, progress, audioLoop, favoriteList, currentSong, handleProgressDown, musicList, audio, isLoading, resizeComponents, setCookie, cookies, pathname, newProgress, router, audioShuffle, clickAudio, nextSong]"]